type: container
family: [lgc]
title: Legion Controllers Configuration
hint: >-
  Allows for configuring the legion controllers using the built in firmware
  commands and enabling emulation modes for various controller types.

children:
  shortcuts:
    type: bool
    title: Enable Shortcuts Controller
    hint: >-
      When emulation is not active, enable a shortcuts controller to restore
      Guide, QAM, and shortcut functionality.
    default: True

  xinput:
    type: mode
    family: [lgc_xinput]
    title: X-input Emulation Mode
    hint: >-
      Emulate different controller types when the Legion Controllers are in X-Input mode.

    default: ds5e
    modes:
      #
      # No emulation
      #
      disabled:
        type: container
        family: [lgc_emulation_disabled]
        title: Disabled
        hint: >-
          Does not modify the default controller.

        children:
          shortcuts:
            type: bool
            title: Enable Shortcuts Device
            hint: >-
              Enables the shortcuts device which will re-enable QAM, Xbox
              button, and their combinations.
            default: True
      #
      # Dual Sense 5
      #
      ds5e:
        type: container
        family: [lgc_emulation_ds5e, ds5e]
        title: Dual Sense 5 Edge
        hint: >-
          Emulates the expensive DS5 Edge sony controller that maps 1-1 to
          the legion go.

        children:
          led_support:
            type: bool
            title: LED Support
            hint: >-
              Passes through the LEDs to the controller, which allows games
              to control them.
            default: True
          gyro:
            type: bool
            title: Gyroscope
            hint: >-
              Enables gyroscope support (.3% background CPU use)
            default: True
          accel:
            type: bool
            title: Accelerometer
            hint: >-
              Enables accelerometer support (not currently supported properly).
            default: True
          gyro_fix:
            type: discrete
            title: Gyro Fix (hz)
            hint: >-
              Adds polling to the legion go gyroscope, to fix the low polling rate
              (required for gyroscope support). Set to 0 to disable.
              Due to hardware limitations, there is a marginal difference above
              100hz.
            options: [0, 40, 60, 75, 100, 125, 200, 300]
            default: 100
          swap_legion:
            type: multiple
            title: Swap Legion Buttons with Start/Select
            hint: >-
              Swaps the legion buttons with start select.
            options: ["disabled", "l_is_start", "l_is_select"]
            default: disabled
          share_to_qam:
            type: bool
            title: Map the Legion L button to QAM (instead of Mute)
            default: True
          touchpad_mode:
            type: multiple
            title: Touchpad correction type
            hint: >-
              The legion touchpad is square, whereas the DS5 one is rectangular.
              Therefore, it needs to be corrected.
              "Contain" maintain the whole DS5 touchpad and part of the Legion
              one is unused. "Crop" uses the full legion touchpad, and limits
              the area of the DS5. "Stretch" uses both fully (distorted).
              "Crop End" enables use in steam input as the right touchpad.
              Set to "Disabled" to not remap.
            options:
              [
                "disabled",
                "stretch",
                "crop_center",
                "crop_start",
                "crop_end",
                "contain_start",
                "contain_end",
                "contain_center",
              ]
            default: crop_end
